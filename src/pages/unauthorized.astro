---
import Layout from "../layouts/Layout.astro";
import { UnauthorizedPage } from "../components/pages";
import { getUser } from "../lib/auth";

const user = await getUser(Astro.request);

// Must be logged in to see this page
if (!user) {
  return Astro.redirect("/login");
}
---

<Layout title="Not Authorized - Soup or Bowl 2026">
  <UnauthorizedPage email={user.email} />
</Layout>
